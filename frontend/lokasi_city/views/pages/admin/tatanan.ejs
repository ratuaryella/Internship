<% layout('layout') %>

<%- include('../../partials/navbar.ejs'); %>
<div class="container-fluid px-4">
    <div class="row my-5">
        <h3 class="fs-4 mb-3">Data Tatanan</h3>
        <div class="col">
            <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo"><i class="far fa-plus-square"></i> Tambah Tatanan</button>
            
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Tambah Tatanan</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <h6>Jenis</h6>
            <input type="text" class="form-control" id="recipient-name">
          </div>
          <div class="mb-3">
            <h6>Kategori</h6>
            <input type="text" class="form-control" id="recipient-name">
          </div>
          <div class="mb-3">
            <h6>Nama</h6>
            <input type="text" class="form-control" id="recipient-name">
          </div>
          <div class="mb-3">
            <h6>Sub Indikator</h6>
            <input type="text" class="form-control" id="recipient-name">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>
            <table id="tabel_tatanan" class="table bg-light rounded shadow-sm  table-hover">
                <thead>
                    <tr>
                        <th>nama_tatanan</th>
                        <th>jenis_indikator</th>
                        <th>kategori</th>
                        <th>nama_indikator</th>
                        <th>SubIndikator</th>
                </thead>
                <tbody>
                     <!--<tr>
                        <td><a href="#">1</a></td>
                        <td>Pokok</td>
                        <td>Kawasan Pemukiman</td>
                        <td>Udara Bersih</td>
                        <td>Memenuhi standar ISPU</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><a href="#">2</a></td>
                        <td>Pokok</td>
                        <td>Kawasan Pemukiman</td>
                        <td>Udara Bersih</td>
                        <td>Memenuhi standar ISPU</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><a href="#">3</a></td>
                        <td>Pokok</td>
                        <td>Kawasan Pemukiman</td>
                        <td>Udara Bersih</td>
                        <td>Memenuhi standar ISPU</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><a href="#">4</a></td>
                        <td>Pokok</td>
                        <td>Kawasan Pemukiman</td>
                        <td>Udara Bersih</td>
                        <td>Memenuhi standar ISPU</td>
                        <td></td>
                    </tr>-->
                </tbody>
            </table>
        </div>
    </div>
    <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item"><a class="page-link" href="#">Previous</a></li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item"><a class="page-link" href="#">Next</a></li>
        </ul>
      </nav>
</div>
<script type="text/javascript">
    $(document).ready(function () {
    $.ajax({
        type: "GET",
        url: '/api-v1/intern/get-all-tatanan',
        //headers: {
        //Authorization: 'Bearer ' + localStorage.getItem('token') },
        dataType: 'JSON',
        success: function(data) {
            console.log(data, "ini data tatanan")
            var tatanan = '';
            let dataCoba = data.data.result

            // ITERATING THROUGH OBJECTS
            $.each(dataCoba, function (key, value) {
            console.log(value, "ini value")

                //CONSTRUCTION OF ROWS HAVING
                // DATA FROM JSON OBJECT
                tatanan += '<tr>';
                tatanan += '<td>' + 
                    value.nama_tatanan + '</td>';

                tatanan += '<td>' + 
                    value.jenis_indikator + '</td>';

                tatanan += '<td>' + 
                    value.kategori + '</td>';

                tatanan += '<td>' + 
                    value.nama_indikator + '</td>';

                tatanan += '<td>' + 
                    value.subindikator + '</td>';

                tatanan += '</tr>';
            });
              
            //INSERTING ROWS INTO TABLE 
            $('#tabel_tatanan').append(tatanan);
        }
    })
});
</script>
